@import "tailwindcss";
@import "./tiers.css";

@theme {
  /* Cyberpunk color palette */
  --color-bg-primary: #0a0a0f;
  --color-bg-secondary: #111118;
  --color-bg-surface: #1a1a24;
  --color-bg-elevated: #22222e;

  --color-cyber-cyan: #00f0ff;
  --color-cyber-magenta: #ff00ff;
  --color-cyber-green: #00ff88;
  --color-cyber-amber: #ffaa00;
  --color-cyber-red: #ff3333;

  --color-text-primary: #e0e0e8;
  --color-text-secondary: #8888a0;
  --color-text-muted: #555566;

  --color-border-default: #2a2a3a;
  --color-border-bright: #3a3a4a;

  --font-mono: "JetBrains Mono", "Fira Code", "SF Mono", monospace;
  --font-display: "Space Grotesk", system-ui, sans-serif;
}

/* Base styles */
html {
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-family: var(--font-mono);
}

body {
  margin: 0;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-primary);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border-bright);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-cyber-cyan);
}

/* Selection */
::selection {
  background-color: color-mix(in srgb, var(--color-cyber-cyan) 30%, transparent);
  color: white;
}

/* Scanline overlay effect */
.scanlines::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: 
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.05) 2px,
      rgba(0, 0, 0, 0.05) 4px
    ),
    radial-gradient(
      circle,
      transparent 40%,
      rgba(0, 0, 0, 0.3) 100%
    );
  z-index: 9999;
}

/* Glow effects */
.glow-cyan {
  text-shadow: 0 0 10px var(--color-cyber-cyan), 0 0 20px color-mix(in srgb, var(--color-cyber-cyan) 50%, transparent);
}

.glow-magenta {
  text-shadow: 0 0 10px var(--color-cyber-magenta), 0 0 20px color-mix(in srgb, var(--color-cyber-magenta) 50%, transparent);
}

.glow-green {
  text-shadow: 0 0 10px var(--color-cyber-green), 0 0 20px color-mix(in srgb, var(--color-cyber-green) 50%, transparent);
}

/* Border glow */
.border-glow-cyan {
  box-shadow: 0 0 5px color-mix(in srgb, var(--color-cyber-cyan) 30%, transparent),
    inset 0 0 5px color-mix(in srgb, var(--color-cyber-cyan) 10%, transparent);
}

/* Utility: hide scrollbar */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* HUD elements */
.hud-box {
  position: relative;
  background: color-mix(in srgb, var(--color-bg-surface) 40%, transparent);
  border: 1px solid var(--color-border-default);
  backdrop-filter: blur(4px);
}

.cyber-grid {
  background-size: 40px 40px;
  background-image:
    linear-gradient(to right, color-mix(in srgb, var(--color-border-default) 35%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in srgb, var(--color-border-default) 35%, transparent) 1px, transparent 1px);
  mask-image: radial-gradient(circle at center, black 30%, transparent 90%);
}

.hud-corner {
  position: absolute;
  width: 6px;
  height: 6px;
  border-color: var(--color-cyber-cyan);
  opacity: 0.6;
  pointer-events: none;
}

.hud-corner-tl { top: -1px; left: -1px; border-top: 1.5px solid; border-left: 1.5px solid; }
.hud-corner-tr { top: -1px; right: -1px; border-top: 1.5px solid; border-right: 1.5px solid; }
.hud-corner-bl { bottom: -1px; left: -1px; border-bottom: 1.5px solid; border-left: 1.5px solid; }
.hud-corner-br { bottom: -1px; right: -1px; border-bottom: 1.5px solid; border-right: 1.5px solid; }

.hud-glow-cyan {
  box-shadow: 0 0 15px color-mix(in srgb, var(--color-cyber-cyan) 10%, transparent);
}

/* Safe area padding utility */
.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* ─── Screen shake ─────────────────────────────────────────────────────────── */
@keyframes shake-subtle {
  0%, 100% { transform: translateX(0) translateY(0); }
  10%  { transform: translateX(-3px) translateY(1px); }
  25%  { transform: translateX(3px)  translateY(-1px); }
  40%  { transform: translateX(-3px) translateY(0px); }
  55%  { transform: translateX(2px)  translateY(1px); }
  70%  { transform: translateX(-2px) translateY(-1px); }
  85%  { transform: translateX(1px)  translateY(0px); }
}

@keyframes shake-dramatic {
  0%, 100% { transform: translateX(0) translateY(0); }
  8%   { transform: translateX(-8px) translateY(3px); }
  18%  { transform: translateX(8px)  translateY(-3px); }
  28%  { transform: translateX(-7px) translateY(2px); }
  38%  { transform: translateX(6px)  translateY(-2px); }
  48%  { transform: translateX(-5px) translateY(3px); }
  58%  { transform: translateX(4px)  translateY(-2px); }
  68%  { transform: translateX(-3px) translateY(1px); }
  80%  { transform: translateX(2px)  translateY(-1px); }
  90%  { transform: translateX(-1px) translateY(0px); }
}

[data-shake="subtle"] {
  animation: shake-subtle 0.6s ease-in-out;
}

[data-shake="dramatic"] {
  animation: shake-dramatic 0.65s ease-in-out;
}

/* ─── Particle burst ────────────────────────────────────────────────────────── */
@keyframes particle-burst {
  0%   { transform: translate(0, 0) scale(1); opacity: 1; }
  60%  { opacity: 0.6; }
  100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
}

/* ─── Modal panel chrome ────────────────────────────────────────────────────── */
.modal-panel {
  clip-path: polygon(
    0 0,
    calc(100% - 16px) 0,
    100% 16px,
    100% 100%,
    16px 100%,
    0 calc(100% - 16px)
  );
}

/* Amplified HUD corners for modal panels */
.modal-panel .hud-corner {
  width: 10px;
  height: 10px;
  opacity: 0.9;
}

/* ─── Hud corner size variants ──────────────────────────────────────────────── */
.hud-corner-lg {
  width: 10px;
  height: 10px;
}
.hud-corner-lg.hud-corner-tl { top: -1px; left: -1px; border-top: 2px solid; border-left: 2px solid; }
.hud-corner-lg.hud-corner-tr { top: -1px; right: -1px; border-top: 2px solid; border-right: 2px solid; }
.hud-corner-lg.hud-corner-bl { bottom: -1px; left: -1px; border-bottom: 2px solid; border-left: 2px solid; }
.hud-corner-lg.hud-corner-br { bottom: -1px; right: -1px; border-bottom: 2px solid; border-right: 2px solid; }

/* ─── Network map: compositor-driven animations ──────────────────────────── */
@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

@keyframes spin-slow-reverse {
  from { transform: rotate(0deg); }
  to   { transform: rotate(-360deg); }
}

@keyframes pulse-glow {
  0%, 100% { r: 60px; opacity: 0.3; }
  50%      { r: 64px; opacity: 0.5; }
}

@keyframes pulse-node {
  0%, 100% { r: 28px; }
  50%      { r: 32px; }
}

@keyframes flicker-locked {
  0%, 100% { opacity: 0.5; transform: translateX(0); }
  10%      { opacity: 0.3; transform: translateX(-1px); }
  20%      { opacity: 0.5; transform: translateX(1px); }
  30%      { opacity: 0.4; transform: translateX(0); }
}

@keyframes dash-flow {
  from { stroke-dashoffset: 0; }
  to   { stroke-dashoffset: -32; }
}

@keyframes pulse-endpoint {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50%      { transform: scale(1.5); opacity: 1; }
}

@keyframes energy-pulse-low {
  0%, 100% { background-color: #ffaa00; }
  50%      { background-color: #332200; }
}

@keyframes slide-in-left {
  from { transform: translateX(-100%); }
  to   { transform: translateX(0); }
}
